{% extends "base.html" %}

{% block title %}
	<title>{{ branch.title }}</title>
{% endblock %}
{% block content %}
    <div class="container">
        <div>
            <h2 class="text-center">{{ branch.title }}{% if branch.created_by == request.user %}<a href="{% url "forum:delete-branch" branch.pk %}" class="btn btn-danger m-3"><i class="bi bi-trash3"></i></a>{% endif %}</h2>
            <p style="font-size: 17px">{{ branch.description }}</p>
        </div>
        <div>
            <h2>Comments</h2>
            <form action="{% url "forum:comment-create" branch.pk %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{ comment_form.as_div }}
                <button type="submit" class="btn btn-primary">Add Comment</button>
            </form>
            {% for comment in branch.comments.all %}
            <div class="card p-3 my-3 d-flex">
                <div class="justify-content-between d-flex">
                    <div>
                        <h5>{{ comment.created_by.username }}:</h5>
                        <p>{{ comment.content }}</p>
                    </div>

                    {% if request.user == comment.created_by %}
                    <a href="{% url "forum:comment-delete" comment.pk %}">
                        <i class="bi bi-trash btn btn-danger align-items-center"></i>
                    </a>
                    {% endif %}
                </div>

            </div>
            {% empty %}
                <h2 class="mt-3">No comments here</h2>
            {% endfor %}
            </div>
        </div>
{% endblock %}